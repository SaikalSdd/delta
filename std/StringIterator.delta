struct StringIterator: Copyable, Iterator<char> {
    var current: char[?]*;
    var end: char[?]*;

    init(string: StringRef) {
        current = string.data();
        end = &string.data()[string.size()];
    }

    def hasValue(): bool {
        return current !== end;
    }

    def value(): char {
        return *current;
    }

    mutating def increment() {
        current++;
    }
}
