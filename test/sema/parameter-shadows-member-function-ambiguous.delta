// RUN: not %delta -typecheck %s | %FileCheck %s

struct S {
    var i: int;
    init() {}
    def bar() {}
    def foo(bar: () -> void) {
        // CHECK: [[@LINE+1]]:9: error: ambiguous reference to 'bar'
        bar();
    }
}

def main() {
    var s = S();
}
