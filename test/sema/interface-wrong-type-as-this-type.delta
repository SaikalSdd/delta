// RUN: not %delta -typecheck %s | %FileCheck %s

interface Interface {
    def f(): S*;

    def bar(): This* {
        // CHECK: [[@LINE+1]]:9: error: mismatching return type 'S*', expected 'Interface*'
        return f();
    }
}

struct S: Interface {
    def f(): S* { return this; }
}

def f(s: S*) {
    s.bar();
}
