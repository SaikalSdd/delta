// RUN: true

// CHECK-NOT: a.delta:{{[0-9]+}}:{{[0-9]+}}: {{(warning|error)}}: 'A' is private

private struct A {
    init() {}
}

private def i(q: A*) {
    var a: A = undefined;
    a = A();
}

private def j(a: A) {}

private def k(a: mutable A*?) {}

private def l() -> A*? {
    return null;
}

struct C {
    private var a: A;
}

private struct D {
    // CHECK-PRIVATE-IN-PUBLIC-DECL-NOT: a.delta:[[@LINE+1]]:{{[0-9]+}}: warning: using private type 'A' in public declaration
    var a: A;
}

// CHECK-PRIVATE-IN-PUBLIC-DECL: a.delta:[[@LINE+1]]:10: warning: using private type 'A' in public declaration
def m(r: A*) {
    // CHECK-PRIVATE-IN-PUBLIC-DECL-NOT: a.delta:[[@LINE+1]]:{{[0-9]+}}: warning: using private type 'A' in public declaration
    var a: A = undefined;
    // CHECK-PRIVATE-IN-PUBLIC-DECL-NOT: a.delta:[[@LINE+1]]:{{[0-9]+}}: warning: using private type 'A' in public declaration
    a = A();
}

// CHECK-PRIVATE-IN-PUBLIC-DECL: a.delta:[[@LINE+1]]:10: warning: using private type 'A' in public declaration
def o(a: mutable A*?) {}

// CHECK-PRIVATE-IN-PUBLIC-DECL: a.delta:[[@LINE+1]]:12: warning: using private type 'A' in public declaration
def p() -> mutable A*? {
    return null;
}

struct E {
    // CHECK-PRIVATE-IN-PUBLIC-DECL: a.delta:[[@LINE+1]]:12: warning: using private type 'A' in public declaration
    var a: mutable A*;
}
