// RUN: check_matches_snapshot %s.ll %delta -print-ir %s

interface Interface {
    var that: This*;

    def foo(a: This*): This*;

    def bar(): This* {
        return foo(foo(this));
    }
}

struct S: Interface {
    var that: S*;

    init() { that = this; }

    def foo(a: S*): S* {
        return this;
    }
}

def main() {
    var a = S();
    var b = S();
    f(a.foo(b));
}

def f<T: Interface>(a: T*) {
    a.foo(a.foo(a));
}
