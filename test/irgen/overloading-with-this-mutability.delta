// RUN: %delta -print-ir %s | %FileCheck %s
// RUN: %delta -print-ir %s | %FileCheck %s -check-prefix=MAIN

struct A {
    init() {}

    // CHECK: define void @A.foo({}* %this)
    // CHECK-NEXT: %a = alloca i32
    func foo() {
        let a = 1;
    }

    // CHECK: define void @A.foo.{{[0-9]+}}({}* %this)
    // CHECK-NEXT: %b = alloca i32
    mutating func foo() {
        let b = 1;
    }
}

func main() {
    let a = A();
    var b = A();

    // MAIN: call void @A.foo({}* %a)
    a.foo();

    // MAIN-NEXT: call void @A.foo.{{[0-9]+}}({}* %b)
    b.foo();
}
