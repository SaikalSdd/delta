// RUN: %delta -print-ir %s | %FileCheck %s
// RUN: %delta -print-ir %s | %FileCheck %s -check-prefix=MAIN

struct A {
    init() {}

    // CHECK: define void @_EN4main1A3fooE({}* %this)
    // CHECK-NEXT: %a = alloca i32
    def foo() {
        let a = 1;
    }

    // CHECK: define void @_ENM4main1A3fooE({}* %this)
    // CHECK-NEXT: %b = alloca i32
    mutating def foo() {
        let b = 1;
    }
}

def main() {
    let a = A();
    var b = A();

    // MAIN: call void @_EN4main1A3fooE({}* %a)
    a.foo();

    // MAIN-NEXT: call void @_ENM4main1A3fooE({}* %b)
    b.foo();
}
