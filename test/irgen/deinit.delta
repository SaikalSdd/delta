// RUN: check_matches_snapshot %s.ll %delta -print-ir %s

struct Foo {
    var i: int;

    deinit() {
        i = 0;
        f();
        this.f();
    }

    mutating def f() {}
}

struct Bar: Copyable {
    var i: int;

    deinit() {
        i = 0;
        f();
        this.f();
    }

    mutating def f() {}
}

def main() {
    var f: Foo = undefined;
    if (false) {
        var f2: Foo = undefined;
    }
    var b: Bar = undefined;
    while (false) {
        var b2: Bar = undefined;
        return;
    }
    var i = 1;
}
